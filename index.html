<!DOCTYPE html>
<html lang="fi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Nukkepaidan kaava-apuri</title>

<!-- ==========================
     FONTIT
==============================-->
<link href="https://fonts.googleapis.com/css2?family=Arial:wght@400;700&display=swap" rel="stylesheet">

<!-- ==========================
     ULKOASU (CSS)
==============================-->
<style>
    body {
        font-family: Arial, sans-serif;
        background: #fafafa;
        margin: 0;
        padding: 20px;
    }

    h1 {
        text-align: center;
        font-size: 26px;
        margin-bottom: 20px;
    }

    h2 {
        font-size: 18px;
        margin-bottom: 10px;
    }

    .box {
        background: #fff;
        max-width: 480px;
        margin: 0 auto 20px auto;
        padding: 16px;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0,0,0,0.08);
    }

    label {
        font-size: 15px;
        margin-bottom: 6px;
        display: block;
    }

    input {
        width: 100%;
        font-size: 18px;
        padding: 8px;
        margin-bottom: 12px;
        border-radius: 8px;
        border: 1px solid #ccc;
        box-sizing: border-box;
    }

    /* Kuvapainike */
    .garment-btn {
        width: 100%;
        aspect-ratio: 1 / 1;
        border-radius: 10px;
        border: 2px solid #ddd;
        overflow: hidden;
        cursor: pointer;
        padding: 0;
        background: #000;
    }

    .garment-btn img {
        width: 100%;
        height: 100%;
        object-fit: cover;
    }

    .garment-caption {
        text-align: center;
        font-size: 14px;
        margin-top: 4px;
        color: #444;
    }

    .result {
        margin-top: 16px;
        font-size: 15px;
        white-space: pre-line;
        line-height: 1.6;
    }

    /* Kaavapiirroksen laatikko */
    .svg-wrapper {
        margin-top: 20px;
        border: 1px dashed #ccc;
        border-radius: 10px;
        padding: 10px;
        background: #fff;
    }

    .svg-wrapper p {
        margin: 0 0 10px;
        font-size: 13px;
    }

    .svg-container {
        width: 100%;
        overflow: hidden;
    }

    svg {
        width: 100%;
        background: #fff;
    }
</style>

</head>
<body>

<!-- ==========================
     OTSIKKO
==============================-->
<h1>Nukkepaidan kaava-apuri</h1>

<!-- ==========================
     MITAT
==============================-->
<div class="box">
    <h2>1. Sy√∂t√§ nuken mitat (cm)</h2>

    <label>Rinnanymp√§rys</label>
    <input type="number" id="bust" placeholder="Esim. 14">

    <label>Vy√∂t√§r√∂</label>
    <input type="number" id="waist" placeholder="Esim. 12">

    <label>Hartialeveys</label>
    <input type="number" id="shoulder" placeholder="Esim. 5">

    <label>Sel√§n pituus</label>
    <input type="number" id="backLength" placeholder="Esim. 7">

    <label>K√§den pituus</label>
    <input type="number" id="armLength" placeholder="Esim. 6">
</div>

<!-- ==========================
     PAITAKUVAPAINIKE
==============================-->
<div class="box">
    <h2>2. Valitse vaate painamalla kuvaa</h2>

    <button class="garment-btn" onclick="teePaitaKaava()">
        <!-- Korvaa omaan kuvaasi -->
        <img src="https://via.placeholder.com/400x400.png?text=Paita" alt="Paita">
    </button>

    <div class="garment-caption">Pitk√§hihainen paita</div>

    <div class="result" id="patternOutput"></div>

    <div class="svg-wrapper" id="svgWrapper" style="display:none;">
        <p>Yksinkertainen kaavakuva (tulosta 100 % koossa).</p>
        <div class="svg-container" id="patternSvgContainer"></div>
    </div>
</div>

<!-- ==========================
     KAAVALOGIIKKA (JS)
==============================-->
<script>
function f(n) {
    return n.toFixed(1).replace(".", ",");
}

function teePaitaKaava() {

    const bust = parseFloat(document.getElementById("bust").value);
    const waist = parseFloat(document.getElementById("waist").value);
    const shoulder = parseFloat(document.getElementById("shoulder").value);
    const backLength = parseFloat(document.getElementById("backLength").value);
    const armLength = parseFloat(document.getElementById("armLength").value);

    const out = document.getElementById("patternOutput");
    const svgWrapper = document.getElementById("svgWrapper");
    const svgContainer = document.getElementById("patternSvgContainer");

    if ([bust, waist, shoulder, backLength, armLength].some(x => isNaN(x) || x <= 0)) {
        out.textContent = "Sy√∂t√§ kaikki mitat ensin.";
        svgWrapper.style.display = "none";
        return;
    }

    const ease = 0.5;
    const frontWidth = bust / 4 + ease;
    const backWidth = bust / 4 + ease;
    const bodyLength = backLength;
    const shoulderLen = shoulder / 2;
    const sleeveLength = armLength;
    const sleeveWidth = bust / 4 + ease;

    /* ==========================
       TEKSTIOHJEET
    =============================*/
    let txt = "";
    txt += "üìè Paitakaavan mitat nuken mitoilla:\n\n";
    txt += `Etukappale: leveys ${f(frontWidth)} cm, korkeus ${f(bodyLength)} cm\n`;
    txt += `Olkasauma: ${f(shoulderLen)} cm\n`;
    txt += `P√§√§ntie: leveys ${f(bust/12)} cm, syvyys ${f(bust/20)} cm\n\n`;
    txt += `Takakappale: leveys ${f(backWidth)} cm (p√§√§ntie matalampi)\n\n`;
    txt += `Hiha: pituus ${f(sleeveLength)} cm, leveys ${f(sleeveWidth)} cm\n\n`;
    txt += "Lis√§√§ saumavarat (0,5‚Äì1 cm).";

    out.textContent = txt;

    /* ==========================
       SVG-KAAVAPIIRROS
    =============================*/
    const scale = 10;        // 1 cm = 10 yksikk√∂√§
    const padding = 40;
    const labelFont = 14;
    const labelYOffset = -10;

    const frontW = frontWidth * scale;
    const frontH = bodyLength * scale;
    const backW = backWidth * scale;
    const backH = bodyLength * scale;
    const sleeveW = sleeveWidth * scale;
    const sleeveH = sleeveLength * scale;

    const svgWidth = padding*3 + frontW + backW;
    const svgHeight = padding*4 + Math.max(frontH, backH) + sleeveH;

    const svgParts = [];

    svgParts.push(
        `<svg xmlns="http://www.w3.org/2000/svg" width="${svgWidth}" height="${svgHeight}" viewBox="0 0 ${svgWidth} ${svgHeight}">`,
        `<rect x="0" y="0" width="${svgWidth}" height="${svgHeight}" fill="white" />`
    );

    // Etukappale
    svgParts.push(
        `<text x="${padding + frontW/2}" y="${padding + labelYOffset}" font-size="${labelFont}" text-anchor="middle">Etukappale</text>`,
        `<rect x="${padding}" y="${padding}" width="${frontW}" height="${frontH}" stroke="black" stroke-width="2" fill="none" />`
    );

    // Takakappale
    svgParts.push(
        `<text x="${padding*2 + frontW + backW/2}" y="${padding + labelYOffset}" font-size="${labelFont}" text-anchor="middle">Takakappale</text>`,
        `<rect x="${padding*2 + frontW}" y="${padding}" width="${backW}" height="${backH}" stroke="black" stroke-width="2" fill="none" />`
    );

    // Hiha
    const sleeveY = padding*2 + Math.max(frontH, backH);
    svgParts.push(
        `<text x="${padding + sleeveW/2}" y="${sleeveY + labelYOffset}" font-size="${labelFont}" text-anchor="middle">Hiha</text>`,
        `<rect x="${padding}" y="${sleeveY}" width="${sleeveW}" height="${sleeveH}" stroke="black" stroke-width="2" fill="none" />`
    );

    svgParts.push(`</svg>`);

    svgContainer.innerHTML = svgParts.join("");
    svgWrapper.style.display = "block";
}
</script>

</body>
</html>
